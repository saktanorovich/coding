<html><head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1"><title>4125 - Painter</title></head><body><table align="center" border="1" cellpadding="3" cellspacing="0"><tbody><tr valign="center"><td rowspan="2" align="center" valign="center"><font color="#0000a0" size="5"><b><img src="Painter_files/icono.gif"></b></font></td><td colspan="5" align="center" width="500"><font color="#0000a0" size="5"><b>4125 - Painter</b></font><br><a href="http://acmicpc-live-archive.uva.es/nuevoportal/region.php?r=wfi&amp;year=2007"><b>World Finals - Banff Springs, Alberta - 2007/2008</b></a></td></tr><tr valign="center"><td align="center" width="100"><a href="http://acmicpc-live-archive.uva.es/nuevoportal/data/p4125.pdf"><b>PDF</b></a></td><td width="100">&nbsp;</td><td align="center" width="100"><a href="http://acmicpc-live-archive.uva.es/nuevoportal/mailer.php?problem=4125"><b>Submit</b></a></td><td width="100">&nbsp;</td><td align="center" width="100"><a href="http://acmicpc-live-archive.uva.es/nuevoportal/rankprob.php?p=4125"><b>Ranking</b></a></td></tr></tbody></table><p>&nbsp;</p>
<p>
You probably never heard of the painter Peer. He is not well known, much to his regret. Peer was one of the inventors of <span class="textit">monochromy</span>,
which means that each of his paintings has a single color, but in
different shades. He also believed in the use of simple geometric
forms. </p><p>
During his triangle period, Peer drew triangles on a rectangular
canvas, making sure their borders did not intersect. He would then
choose a color, and fill the regions. Peer would paint the outermost
region (the canvas itself) with the lightest shade of the color chosen.
Then step by step, he would fill more inner regions with a darker shade
of the same color. The image below is one of his ``Forms in Green"
paintings.
</p><p>
</p><div align="center">
<!-- MATH
 $\epsfbox{p4125.eps}$
 -->
<img src="Painter_files/p4125.png" alt="\epsfbox{p4125.eps}" align="bottom" border="0" height="551" width="744">
<tex2html_verbatim_mark>
</tex2html_verbatim_mark></div>

<p>In a way the process was quite mechanical. The only thing Peer
considered difficult was to decide, after drawing the triangles, how
many different shades he would need. You must write a program to do
that calculation for him. Your program will have a collection of
triangles as its input. It should calculate the number of different
shades needed to paint the regions according to the given rule. </p><p>
Your program must also detect the rare times that Peer makes a mistake
and draws triangles that intersect. Two triangles are considered
intersecting if the edges of one triangle have at least one point in
common with the edges of the other. In that case, the collection of
triangles is invalid. </p><p>

</p><h2><font color="#ff0000" size="4"><a name="SECTION0001001000000000000000">
Input</a>&nbsp;</font>
</h2> 

<p>
The input file contains multiple test cases. The first line of each test case contains a single non-negative integer <span class="MATH"><i>n</i></span>
<tex2html_verbatim_mark> <!-- MATH
 $(n \le 100000)$
 -->
<span class="MATH">(<i>n</i><img src="Painter_files/4125img2.png" alt="$ \le$" align="middle" border="0" height="31" width="18">100000)</span>
<tex2html_verbatim_mark>, which is the number of triangles in the test case. The following <span class="MATH"><i>n</i></span>
<tex2html_verbatim_mark> lines of the test case contain the descriptions of triangles in the format <!-- MATH
 $x_{1} \ y_{1} \ x_{2} \ y_{2} \ x_{3} \ y_{3}$
 -->
<span class="MATH"><i>x</i><sub>1</sub>&nbsp;<i>y</i><sub>1</sub>&nbsp;<i>x</i><sub>2</sub>&nbsp;<i>y</i><sub>2</sub>&nbsp;<i>x</i><sub>3</sub>&nbsp;<i>y</i><sub>3</sub></span>
<tex2html_verbatim_mark>, where <span class="MATH"><i>x</i><sub>i</sub></span>
<tex2html_verbatim_mark>, <span class="MATH"><i>y</i><sub>i</sub></span>
<tex2html_verbatim_mark> are integers <!-- MATH
 $(-100000 < x_{i}, y_{i} < 100000)$
 -->
<span class="MATH">(- 100000 &lt; <i>x</i><sub>i</sub>, <i>y</i><sub>i</sub> &lt; 100000)</span>
<tex2html_verbatim_mark> that are the coordinates of the vertices of the triangles. The three points are guaranteed not to be collinear.

</tex2html_verbatim_mark></tex2html_verbatim_mark></tex2html_verbatim_mark></tex2html_verbatim_mark></tex2html_verbatim_mark></tex2html_verbatim_mark></tex2html_verbatim_mark></p><p>
The last test case is followed by `<tt>-1</tt>' on a line by itself.

</p><p>

</p><h2><font color="#ff0000" size="4"><a name="SECTION0001002000000000000000">
Output</a>&nbsp;</font>
</h2> 

<p>
For each test case, print the case number (beginning with 1) and the
number of shades needed to fill the regions if the test case is valid.
Print the word `<tt>ERROR</tt>' if the test case is invalid (two or more triangles in the test case intersect).

</p><p>

</p><h2><font color="#ff0000" size="4"><a name="SECTION0001003000000000000000">
Sample Input</a>&nbsp;</font>
</h2> 

<p>
</p><pre>8 
8 3 8 4 7 4 
14 13 -1 9 9 0 
1 8 7 7 4 10 
5 10 11 8 13 12 
9 10 11 10 11 9 
2 7 9 1 10 6 
5 5 5 6 8 6 
9 2 9 5 6 4 
2
0 0 1 0 0 1 
2 0 1 1 1 -1 
-1
</pre>

<p>

</p><h2><font color="#ff0000" size="4"><a name="SECTION0001004000000000000000">
Sample Output</a>&nbsp;</font>
</h2>

<p>
</p><pre>Case 1: 5 shades 
Case 2: ERROR
</pre>

<p>
</p><hr><address>Banff Springs, Alberta 2007-2008</address><p><b>Tests-Setter:</b> Derek Kisman<br></p></body></html>