<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0063)https://code.google.com/codejam/contest/32016/dashboard#s=a&a=1 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="refresh" content="172795">
  
  <title>
    Dashboard - Round 1A 2008 - Google Code Jam
  </title>

    <style>@import '//www.google.com/css/modules/buttons/g-button-sparrow.css';</style>
    <link rel="stylesheet" type="text/css" href="./Problem B_files/app.css">





    <script type="text/javascript" async="" src="./Problem B_files/ga.js.download"></script><script src="./Problem B_files/App_en.js.download"></script><style></style>
    

  <script type="text/javascript"><!--
    /**
     * Initializes GCJ.problems and GCJ.io from Django parameters.
     * Also initializes the two user specific variables GCJ.isQualified and
     * GCJ.lastClarSeenTime.
     * This is the first function called once from GCJ.dashboardMain().
     */
    GCJ.initContestVariables = function () {
      // Convert Django's 'contest' to 'GCJ.contest'.
      GCJ.contest.id = "32016";
      GCJ.contest.name = "Round 1A 2008";
      GCJ.contest.version = 0;
      
        GCJ.contest.version = 8;
      
      GCJ.contest.start_int = 1217034000;
      GCJ.contest.running = false;
      GCJ.base_url = '/codejam/contest';
      GCJ.scoreboardLink = ('<a target="new"' +
                            'href="scoreboard?c=32016"' +
                            '>Contest scoreboard</a>');
    }

    /**
     * Returns the current splash page.
     */
    GCJ.getSplashPage = function () {
      return "/codejam";
    };
  //-->
  </script>
</head>

<body onload="GCJ.dashboardMain()" class="page-dashboard">

<div id="logo-div">
  <a href="https://code.google.com/codejam/">
    <img src="./Problem B_files/logo_image0.gif" id="logo" alt="Google Code Jam">
  </a>
</div>

<div>

<div id="dsb-page-body">

<div id="left-panel">
  <div class="v-divider"></div>
  <div class="v-divider"></div>
  <div class="v-divider"></div>
  <!-- Problem Selection Panel -->
  <div id="dsb-contest-title">Round 1A 2008</div>
  <hr class="dsb-hr">
  <div id="dsb-problem-selection-area">
    <div id="dsb-problem-selection-list" class="after-start-only" style="display: block;">
    <div><div id="dsb-problem-tab0" class="dsb-problem-tab-close" tabindex="0" role="button">  <div id="dsb-problem-title0" class="dynamic-link">A. Minimum Scalar Product  </div></div></div><div><div id="dsb-problem-tab1" class="dsb-problem-tab-close" tabindex="0" role="button">  <div id="dsb-problem-title1" class="dynamic-link">B. Milkshakes  </div></div></div><div><div id="dsb-problem-tab2" class="dsb-problem-tab-close" tabindex="0" role="button">  <div id="dsb-problem-title2" class="dynamic-link">C. Numbers  </div></div></div></div>
    <div id="dsb-problem-selection-list-pre-contest" class="dsb-pre-contest-text before-start-only" style="display: none;">
      The list of problems will appear here after the contest loads.
      
    </div>
  </div>
  <hr class="dsb-hr">
  <div class="v-divider"></div>
  <div class="v-divider"></div>
  <div id="dsb-analysis-button" class="dsb-analysis-tab-open" tabindex="0" role="button" style="display: block;">
    <div class="dynamic-link">
       <div id="dsb-analysis-tab">
         Contest Analysis
       </div>
    </div>
  </div>
  <div id="dsb-ask-question-area">
    <div id="dsb-ask-question-button" class="dsb-clar-tab-close" tabindex="0" role="button" style="display: block;">
      <div class="dynamic-link">
        <div id="dsb-ask-question-tab" class="">Questions asked</div>
      </div>
    </div>
    <div class="dsb-pre-contest-text before-start-only" style="display: none;">
      You'll be able to ask questions about the problems, and view your
      submissions, here.
      
    </div>
  </div>
  <div id="dsb-submissions-button" class="dsb-submissions-tab-close" tabindex="0" role="button" style="display: none;">
    <div class="dynamic-link">
      <div id="dsb-submissions-tab">
        View my submissions
      </div>
    </div>
  </div>
  <div class="v-divider"></div>
  <div class="v-divider"></div>
  <div class="dsb-mini-tab-wrapper">
  <div id="dsb-status-div-container">
    <div id="dsb-status-header-div" onmouseover="this.style.cursor=&#39;pointer&#39;" onclick="GCJ.toggleStatusPanelVisibility();" style="cursor: pointer;">
      <img id="dsb-status-panel-button" src="./Problem B_files/minus.gif">
      &nbsp; Submissions
    </div>
    <div id="dsb-status-tab" class="after-start-only" style="display: block;">
      <div id="dsb-status-tab-loading-text" class="dsb-pre-contest-text" style="display: none;">
        Loading...
      </div>
    <div id="dsb-status-tab-problems" style="display: block;"><div><div id="dsb-problem-status-wrapper0" class="problem-status-wrapper">  <div class="dsb-status-problem-title">Minimum Scalar Product</div><div><table class="problemStatus">  <tbody>    <tr class="inputSetStatus">      <td id="inputName0_0" class="inputName">5pt</td>      <td class="status">        <div id="selfStat0_0" class="dsb-mini-status-non-highlight">Not attempted</div>        <div id="globalStat0_0" class="globalStat" style="display: block;"><b>2352/2567 users</b> correct (92%)</div>      </td>    </tr>  </tbody></table></div><div><table class="problemStatus">  <tbody>    <tr class="inputSetStatus">      <td id="inputName0_1" class="inputName">10pt</td>      <td class="status">        <div id="selfStat0_1" class="dsb-mini-status-non-highlight">Not attempted</div>        <div id="globalStat0_1" class="globalStat" style="display: block;"><b>1048/2336 users</b> correct (45%)</div>      </td>    </tr>  </tbody></table></div></div></div><div><div id="dsb-problem-status-wrapper1" class="problem-status-wrapper">  <div class="dsb-status-problem-title">Milkshakes</div><div><table class="problemStatus">  <tbody>    <tr class="inputSetStatus">      <td id="inputName1_0" class="inputName">10pt</td>      <td class="status">        <div id="selfStat1_0" class="dsb-mini-status-non-highlight">Not attempted</div>        <div id="globalStat1_0" class="globalStat" style="display: block;"><b>655/1042 users</b> correct (63%)</div>      </td>    </tr>  </tbody></table></div><div><table class="problemStatus">  <tbody>    <tr class="inputSetStatus">      <td id="inputName1_1" class="inputName">25pt</td>      <td class="status">        <div id="selfStat1_1" class="dsb-mini-status-non-highlight">Not attempted</div>        <div id="globalStat1_1" class="globalStat" style="display: block;"><b>312/432 users</b> correct (72%)</div>      </td>    </tr>  </tbody></table></div></div></div><div><div id="dsb-problem-status-wrapper2" class="problem-status-wrapper">  <div class="dsb-status-problem-title">Numbers</div><div><table class="problemStatus">  <tbody>    <tr class="inputSetStatus">      <td id="inputName2_0" class="inputName">15pt</td>      <td class="status">        <div id="selfStat2_0" class="dsb-mini-status-non-highlight">Not attempted</div>        <div id="globalStat2_0" class="globalStat" style="display: block;"><b>577/1925 users</b> correct (30%)</div>      </td>    </tr>  </tbody></table></div><div><table class="problemStatus">  <tbody>    <tr class="inputSetStatus">      <td id="inputName2_1" class="inputName">35pt</td>      <td class="status">        <div id="selfStat2_1" class="dsb-mini-status-non-highlight">Not attempted</div>        <div id="globalStat2_1" class="globalStat" style="display: block;"><b>96/364 users</b> correct (26%)</div>      </td>    </tr>  </tbody></table></div></div></div></div></div>
    <div id="dsb-status-tab-pre-contest" class="dsb-pre-contest-text before-start-only" style="display: none;">
      Statistics about the problems will appear here.  They'll include your
      status on each problem, and other contestants' attempts.
      
    </div>
  </div>
  </div>
  <div class="v-divider"></div>
  <div class="v-divider"></div>
  <!-- Mini Scoreboard -->
  <div class="dsb-mini-tab-wrapper">
    <div id="dsb-scoreboard-div">
      <div id="dsb-scoreboard-header-div" onmouseover="this.style.cursor=&#39;pointer&#39;" onclick="GCJ.toggleVisibility(
              &#39;dsb-scoreboard-table&#39;,
              &#39;dsb-scoreboard-panel-button&#39;,
              &#39;/codejam/contest/static/minus.gif&#39;,
              &#39;/codejam/contest/static/plus.gif&#39;)">
          <img id="dsb-scoreboard-panel-button" src="./Problem B_files/minus.gif">
          &nbsp; Top Scores
      </div>
      <div id="dsb-scoreboard-table-wrap" class="after-start-only" style="display: block;"><table id="dsb-scoreboard-table"><tbody><tr class="dsb-scoreboard-row-even" id="sbRow_0" style="display: block;"><td class="dsb-name-td" id="sbName_0">Bohua</td><td class="dsb-score-td" id="sbScore_0">100</td></tr><tr class="dsb-scoreboard-row-odd" id="sbRow_1" style="display: block;"><td class="dsb-name-td" id="sbName_1">yuhch123</td><td class="dsb-score-td" id="sbScore_1">100</td></tr><tr class="dsb-scoreboard-row-even" id="sbRow_2" style="display: block;"><td class="dsb-name-td" id="sbName_2">neal.wu</td><td class="dsb-score-td" id="sbScore_2">100</td></tr><tr class="dsb-scoreboard-row-odd" id="sbRow_3" style="display: block;"><td class="dsb-name-td" id="sbName_3">newman</td><td class="dsb-score-td" id="sbScore_3">100</td></tr><tr class="dsb-scoreboard-row-even" id="sbRow_4" style="display: block;"><td class="dsb-name-td" id="sbName_4">Plagapong</td><td class="dsb-score-td" id="sbScore_4">100</td></tr><tr class="dsb-scoreboard-row-odd" id="sbRow_5" style="display: block;"><td class="dsb-name-td" id="sbName_5">Ahyangyi</td><td class="dsb-score-td" id="sbScore_5">100</td></tr><tr class="dsb-scoreboard-row-even" id="sbRow_6" style="display: block;"><td class="dsb-name-td" id="sbName_6">Reid</td><td class="dsb-score-td" id="sbScore_6">100</td></tr><tr class="dsb-scoreboard-row-odd" id="sbRow_7" style="display: block;"><td class="dsb-name-td" id="sbName_7">Qingchun</td><td class="dsb-score-td" id="sbScore_7">100</td></tr><tr class="dsb-scoreboard-row-even" id="sbRow_8" style="display: block;"><td class="dsb-name-td" id="sbName_8">ploh</td><td class="dsb-score-td" id="sbScore_8">100</td></tr><tr class="dsb-scoreboard-row-odd" id="sbRow_9" style="display: block;"><td class="dsb-name-td" id="sbName_9">kubus</td><td class="dsb-score-td" id="sbScore_9">100</td></tr></tbody></table></div>
      <div id="dsb-scoreboard-tab-pre-contest" class="dsb-pre-contest-text before-start-only" style="display: none;">
        The scores of the top 10 contestants will appear here, with a link to
        the contest's scoreboard.
        
      </div>
      <div class="dsb-mini-tab-link">
      </div>
    </div>
  </div>
</div>

<div id="right-panel">
  <div id="dsb-status-msg-wrapper" class="dsb-status-msg-wrapper" role="alert" style="visibility: hidden;">
    <div id="dsb-status-msg" class="dsb-status-msg">
      <span id="dsb-status-msg-text">Loading problem information...</span>
      <span id="dsb-view-sub-link" style="display: none;">View submissions.</span>
    </div>
  </div>

  <div id="dsb-contest-title-bar">
    <div id="dsb-rank-etc">
      <span id="dsb-time-remaining">Practice Mode</span>
      <span class="after-start-only-inline" style="display: inline;">
        <span id="dsb-current-rank-div" style="display: none;">
          Rank: <span id="dsb-current-rank-span">--</span>
        </span>
        <span id="dsb-current-score-div" style="display: none;">
          Score: <span id="dsb-current-score-span">--</span>
        </span>
      </span>
    </div>
    <div id="dsb-title-links"><a target="new" href="https://code.google.com/codejam/contest/32016/scoreboard?c=32016">Contest scoreboard</a> | <a href="https://www.google.com/accounts/ServiceLogin?service=ah&amp;passive=true&amp;continue=https://appengine.google.com/_ah/conflogin%3Fcontinue%3Dhttps://code.google.com/codejam/contest/dashboard%253Fc%253D32016&amp;ltmpl=">Sign in</a></div>
  </div>
  <!-- Problem Statement -->
  <div id="main-panel-border" class="dsb-green-border">
  <div id="dsb-border-inner">
   <!-- Problem Title -->
    <h3 id="dsb-problem-title-area">
      <span id="dsb-problem-title-div-pre-contest" class="problem-title before-start-only" style="display: none;">
        <span style="color:#666">Problem.</span>
        The problem's name goes here.
      </span>
      <span id="dsb-problem-title-div" class="problem-title after-start-only" style="display: block;">Contest Analysis</span>
    </h3>

    <div class="dsb-content-pages before-start-only" style="display: none;">
      We're now waiting for the contest to start.  Once the contest starts,
      the problems will automatically load, and Problem A will display here.
      You don't have to solve that problem first; you will be able to select
      another problem from the list to the left.  Once you've solved one
      problem, don't forget to work on the others!
      
    </div>

    <div id="dsb-problem-pages"><div id="dsb-problem-page0" class="dsb-content-pages" style="display: none;"><!-- Problem Input File Selection --><div class="dsb-input-panel-text" id="dsb-input-panel-text0"><span style="color: #666666;">This contest is open for practice.  You can try every problem as many times as you like, though we won't keep track of which problems you solve.  Read the <a href="https://code.google.com/codejam/quickstart.html" target="_blank">Quick-Start Guide</a> to get started.</span></div><table><tbody id="dsb-input-form-table0"><tr><td class="dsb-input-table-description">Small input<br>5 points</td><td class="dsb-input-table-linktd"><div id="dsb-action-box-wrap0-0" class="dsb-action-box-open"><div id="dsb-input-wrapper0-0" class="dsb-input-wrapper" style="display: inline;"><button class="dsb-input-start-button" id="dsb-input-start-button0-0" style="display: none;">Solve A-small</button><span class="dsb-input-link-span" id="dsb-input-link-plain0-0" style="display: inline;"><img class="dsb-input-link-img" src="./Problem B_files/file.gif"><span class="dsb-input-link-text" id="dsb-input-link-plain-text0-0">Download A-small-practice.in</span></span></div><span class="dsb-input-table-caption" id="dsb-input-table-caption0-0" style="display: none;"></span><span class="dsb-input-table-caption" id="dsb-resubmit-caption0-0" style="display: none;">Your submission was received. You can still <span class="dsb-input-link-text" id="dsb-resubmit-link0-0">resubmit</span> for <span id="dsb-resubmit-timer0-0"></span>.<br>Only your last submission counts. <span class="dsb-input-link-text" id="dsb-resubmit-view-sub-link0-0">View your last submission</span>.</span><div><div class="dsb-submit-form-div" id="dsb-submit-form-div0-0" style="display: block;"><div style="display:none"><b>Time Remaining:</b> <span id="io_timer_0"></span>&nbsp;&nbsp;</div><div style="display:none"><b>Input:</b> A-small-practice.in.</div><form id="submit-formio_timer_0" action="https://code.google.com/codejam/contest/32016/dashboard/do" enctype="multipart/form-data" method="post"><input type="hidden" name="csrfmiddlewaretoken" value="NjkyZTFiODA0NDQ1ZDgxYzVjMzE2YjUyMzQ0OGI4Yjh8fDE0OTI1ODQxMjA3MTY5OTA="><div class="dsb-submit-form-separator">your output file:<input id="output-fileio_timer_0" type="file" name="answer" class="submitFormFile"></div><div style="display: none"><table class="dsb-source-code-table"><tbody><tr><td style="padding:0.4em 0.2em 0 0">source code:&nbsp;&nbsp;</td><td><div id="source-filesio_timer_0"><div id="input-file-divio_timer_0-0"><span id="source-fileio_timer_0-0"><input type="file" name="source-file0" class="submitFormFile"></span><span id="remove-source-fileio_timer_0-0" class="dsb-submit-form-links" style="visibility: hidden;">remove</span></div></div><span id="add-source-fileio_timer_0" class="dsb-submit-form-links">Add another file</span></td></tr></tbody></table></div><div class="dsb-submit-form-separator" style="color:gray">source file(s): &nbsp;&nbsp;&nbsp;not needed for the practice contest</div><div class="dsb-submit-form-separator" style="text-align:center"><input id="submit-buttonio_timer_0" type="button" value="Submit file">&nbsp;&nbsp;<input id="dsb-hide-submissionio_timer_0" type="button" value="Hide"></div><div id="source-file-namesio_timer_0"></div><input type="hidden" name="cmd" value="SubmitAnswer"><input type="hidden" name="problem" value="24484"><input type="hidden" name="input_id" value="0"><input type="hidden" name="num_source_files" id="num-source-filesio_timer_0" value="1"><input type="hidden" name="agent" value="website"></form></div></div></div></td></tr><tr><td class="dsb-input-table-description">Large input<br>10 points</td><td class="dsb-input-table-linktd"><div id="dsb-action-box-wrap0-1" class="dsb-action-box-open"><div id="dsb-input-wrapper0-1" class="dsb-input-wrapper" style="display: inline;"><button class="dsb-input-start-button" id="dsb-input-start-button0-1" style="display: none;">Solve A-large</button><span class="dsb-input-link-span" id="dsb-input-link-plain0-1" style="display: inline;"><img class="dsb-input-link-img" src="./Problem B_files/file.gif"><span class="dsb-input-link-text" id="dsb-input-link-plain-text0-1">Download A-large-practice.in</span></span></div><span class="dsb-input-table-caption" id="dsb-input-table-caption0-1" style="display: none;"></span><span class="dsb-input-table-caption" id="dsb-resubmit-caption0-1" style="display: none;">Your submission was received. You can still <span class="dsb-input-link-text" id="dsb-resubmit-link0-1">resubmit</span> for <span id="dsb-resubmit-timer0-1"></span>.<br>Only your last submission counts. <span class="dsb-input-link-text" id="dsb-resubmit-view-sub-link0-1">View your last submission</span>.</span><div><div class="dsb-submit-form-div" id="dsb-submit-form-div0-1" style="display: block;"><div style="display:none"><b>Time Remaining:</b> <span id="io_timer_1"></span>&nbsp;&nbsp;</div><div style="display:none">You may resubmit this multiple times within the remaining time-frame. Only your last submission will count.</div><form id="submit-formio_timer_1" action="https://code.google.com/codejam/contest/32016/dashboard/do" enctype="multipart/form-data" method="post"><input type="hidden" name="csrfmiddlewaretoken" value="NjkyZTFiODA0NDQ1ZDgxYzVjMzE2YjUyMzQ0OGI4Yjh8fDE0OTI1ODQxMjA3MTY5OTA="><div class="dsb-submit-form-separator">your output file:<input id="output-fileio_timer_1" type="file" name="answer" class="submitFormFile"></div><div style="display: none"><table class="dsb-source-code-table"><tbody><tr><td style="padding:0.4em 0.2em 0 0">source code:&nbsp;&nbsp;</td><td><div id="source-filesio_timer_1"><div id="input-file-divio_timer_1-0"><span id="source-fileio_timer_1-0"><input type="file" name="source-file0" class="submitFormFile"></span><span id="remove-source-fileio_timer_1-0" class="dsb-submit-form-links" style="visibility: hidden;">remove</span></div></div><span id="add-source-fileio_timer_1" class="dsb-submit-form-links">Add another file</span></td></tr></tbody></table></div><div class="dsb-submit-form-separator" style="color:gray">source file(s): &nbsp;&nbsp;&nbsp;not needed for the practice contest</div><div class="dsb-submit-form-separator" style="text-align:center"><input id="submit-buttonio_timer_1" type="button" value="Submit file">&nbsp;&nbsp;<input id="dsb-hide-submissionio_timer_1" type="button" value="Hide"></div><div id="source-file-namesio_timer_1"></div><input type="hidden" name="cmd" value="SubmitAnswer"><input type="hidden" name="problem" value="24484"><input type="hidden" name="input_id" value="1"><input type="hidden" name="num_source_files" id="num-source-filesio_timer_1" value="1"><input type="hidden" name="agent" value="website"></form></div></div></div></td></tr></tbody></table><!-- Problem Statement --><div id="dsb-problem-content-div0" class="dsb-problem-content-div" style="width: 40em;"><p class="problem-item">Problem</p>
<p>
You are given two vectors v<sub>1</sub>=(x<sub>1</sub>,x<sub>2</sub>,...,x<sub>n</sub>) and v<sub>2</sub>=(y<sub>1</sub>,y<sub>2</sub>,...,y<sub>n</sub>). The scalar product of these vectors is a single number, calculated as x<sub>1</sub>y<sub>1</sub>+x<sub>2</sub>y<sub>2</sub>+...+x<sub>n</sub>y<sub>n</sub>. 
</p>

<p>
Suppose you are allowed to permute the coordinates of each vector as you wish. Choose two permutations such that the scalar product of your two new vectors is the smallest possible, and output that minimum scalar product.
</p>

<p class="problem-item">Input</p>
The first line of the input file contains integer number <b>T</b> - the number of test cases. For each test case, the first line contains integer number <b>n</b>. 
The next two lines contain <b>n</b> integers each, giving the coordinates of  v<sub>1</sub> and v<sub>2</sub> respectively.
<p></p>

<p class="problem-item">Output</p>
<p>
For each test case, output a line
</p><pre>Case #<b>X</b>: <b>Y</b></pre>
where <b>X</b> is the test case number, starting from 1, and <b>Y</b> is the minimum scalar product of all permutations of the two given vectors.
<p></p>

<p class="problem-item">Limits</p>
<p>
</p>

<p class="problem-item">Small dataset</p>
<p>
  <b>T</b> = 1000<br>
  1 ≤ <b>n</b> ≤ 8<br>
  -1000 ≤ <b>x</b><sub>i</sub>, <b>y</b><sub>i</sub> ≤ 1000
</p>

<p class="problem-item">Large dataset</p>
<p>
  <b>T</b> = 10<br>
  100 ≤ <b>n</b> ≤ 800<br>
  -100000 ≤ <b>x</b><sub>i</sub>, <b>y</b><sub>i</sub> ≤ 100000
</p>

<p class="problem-item">Sample</p>
<div class="problem-io-wrapper">
<table>
<tbody><tr>
<td>
<br>
<span class="problem-item-gray">Input</span>
<br>&nbsp;
</td>
<td>
<br>
<span class="problem-item-gray">Output</span>
<br>&nbsp;
</td>
</tr>
<tr>
<td>
<code>
2<br>
3<br>
1 3 -5<br>
-2 4 1<br>
5<br>
1 2 3 4 5<br>
1 0 1 0 1<br>
<br>
</code>
</td>
<td>
<code>
Case #1: -25<br>
Case #2: 6<br>
<br>
</code>
</td>
</tr>
</tbody></table>
</div></div></div><div id="dsb-problem-page1" class="dsb-content-pages" style="display: none;"><!-- Problem Input File Selection --><div class="dsb-input-panel-text" id="dsb-input-panel-text1"><span style="color: #666666;">This contest is open for practice.  You can try every problem as many times as you like, though we won't keep track of which problems you solve.  Read the <a href="https://code.google.com/codejam/quickstart.html" target="_blank">Quick-Start Guide</a> to get started.</span></div><table><tbody id="dsb-input-form-table1"><tr><td class="dsb-input-table-description">Small input<br>10 points</td><td class="dsb-input-table-linktd"><div id="dsb-action-box-wrap1-0" class="dsb-action-box-open"><div id="dsb-input-wrapper1-0" class="dsb-input-wrapper" style="display: inline;"><button class="dsb-input-start-button" id="dsb-input-start-button1-0" style="display: none;">Solve B-small</button><span class="dsb-input-link-span" id="dsb-input-link-plain1-0" style="display: inline;"><img class="dsb-input-link-img" src="./Problem B_files/file.gif"><span class="dsb-input-link-text" id="dsb-input-link-plain-text1-0">Download B-small-practice.in</span></span></div><span class="dsb-input-table-caption" id="dsb-input-table-caption1-0" style="display: none;"></span><span class="dsb-input-table-caption" id="dsb-resubmit-caption1-0" style="display: none;">Your submission was received. You can still <span class="dsb-input-link-text" id="dsb-resubmit-link1-0">resubmit</span> for <span id="dsb-resubmit-timer1-0"></span>.<br>Only your last submission counts. <span class="dsb-input-link-text" id="dsb-resubmit-view-sub-link1-0">View your last submission</span>.</span><div><div class="dsb-submit-form-div" id="dsb-submit-form-div1-0" style="display: block;"><div style="display:none"><b>Time Remaining:</b> <span id="io_timer_2"></span>&nbsp;&nbsp;</div><div style="display:none"><b>Input:</b> B-small-practice.in.</div><form id="submit-formio_timer_2" action="https://code.google.com/codejam/contest/32016/dashboard/do" enctype="multipart/form-data" method="post"><input type="hidden" name="csrfmiddlewaretoken" value="NjkyZTFiODA0NDQ1ZDgxYzVjMzE2YjUyMzQ0OGI4Yjh8fDE0OTI1ODQxMjA3MTY5OTA="><div class="dsb-submit-form-separator">your output file:<input id="output-fileio_timer_2" type="file" name="answer" class="submitFormFile"></div><div style="display: none"><table class="dsb-source-code-table"><tbody><tr><td style="padding:0.4em 0.2em 0 0">source code:&nbsp;&nbsp;</td><td><div id="source-filesio_timer_2"><div id="input-file-divio_timer_2-0"><span id="source-fileio_timer_2-0"><input type="file" name="source-file0" class="submitFormFile"></span><span id="remove-source-fileio_timer_2-0" class="dsb-submit-form-links" style="visibility: hidden;">remove</span></div></div><span id="add-source-fileio_timer_2" class="dsb-submit-form-links">Add another file</span></td></tr></tbody></table></div><div class="dsb-submit-form-separator" style="color:gray">source file(s): &nbsp;&nbsp;&nbsp;not needed for the practice contest</div><div class="dsb-submit-form-separator" style="text-align:center"><input id="submit-buttonio_timer_2" type="button" value="Submit file">&nbsp;&nbsp;<input id="dsb-hide-submissionio_timer_2" type="button" value="Hide"></div><div id="source-file-namesio_timer_2"></div><input type="hidden" name="cmd" value="SubmitAnswer"><input type="hidden" name="problem" value="24482"><input type="hidden" name="input_id" value="0"><input type="hidden" name="num_source_files" id="num-source-filesio_timer_2" value="1"><input type="hidden" name="agent" value="website"></form></div></div></div></td></tr><tr><td class="dsb-input-table-description">Large input<br>25 points</td><td class="dsb-input-table-linktd"><div id="dsb-action-box-wrap1-1" class="dsb-action-box-open"><div id="dsb-input-wrapper1-1" class="dsb-input-wrapper" style="display: inline;"><button class="dsb-input-start-button" id="dsb-input-start-button1-1" style="display: none;">Solve B-large</button><span class="dsb-input-link-span" id="dsb-input-link-plain1-1" style="display: inline;"><img class="dsb-input-link-img" src="./Problem B_files/file.gif"><span class="dsb-input-link-text" id="dsb-input-link-plain-text1-1">Download B-large-practice.in</span></span></div><span class="dsb-input-table-caption" id="dsb-input-table-caption1-1" style="display: none;"></span><span class="dsb-input-table-caption" id="dsb-resubmit-caption1-1" style="display: none;">Your submission was received. You can still <span class="dsb-input-link-text" id="dsb-resubmit-link1-1">resubmit</span> for <span id="dsb-resubmit-timer1-1"></span>.<br>Only your last submission counts. <span class="dsb-input-link-text" id="dsb-resubmit-view-sub-link1-1">View your last submission</span>.</span><div><div class="dsb-submit-form-div" id="dsb-submit-form-div1-1" style="display: block;"><div style="display:none"><b>Time Remaining:</b> <span id="io_timer_3"></span>&nbsp;&nbsp;</div><div style="display:none">You may resubmit this multiple times within the remaining time-frame. Only your last submission will count.</div><form id="submit-formio_timer_3" action="https://code.google.com/codejam/contest/32016/dashboard/do" enctype="multipart/form-data" method="post"><input type="hidden" name="csrfmiddlewaretoken" value="NjkyZTFiODA0NDQ1ZDgxYzVjMzE2YjUyMzQ0OGI4Yjh8fDE0OTI1ODQxMjA3MTY5OTA="><div class="dsb-submit-form-separator">your output file:<input id="output-fileio_timer_3" type="file" name="answer" class="submitFormFile"></div><div style="display: none"><table class="dsb-source-code-table"><tbody><tr><td style="padding:0.4em 0.2em 0 0">source code:&nbsp;&nbsp;</td><td><div id="source-filesio_timer_3"><div id="input-file-divio_timer_3-0"><span id="source-fileio_timer_3-0"><input type="file" name="source-file0" class="submitFormFile"></span><span id="remove-source-fileio_timer_3-0" class="dsb-submit-form-links" style="visibility: hidden;">remove</span></div></div><span id="add-source-fileio_timer_3" class="dsb-submit-form-links">Add another file</span></td></tr></tbody></table></div><div class="dsb-submit-form-separator" style="color:gray">source file(s): &nbsp;&nbsp;&nbsp;not needed for the practice contest</div><div class="dsb-submit-form-separator" style="text-align:center"><input id="submit-buttonio_timer_3" type="button" value="Submit file">&nbsp;&nbsp;<input id="dsb-hide-submissionio_timer_3" type="button" value="Hide"></div><div id="source-file-namesio_timer_3"></div><input type="hidden" name="cmd" value="SubmitAnswer"><input type="hidden" name="problem" value="24482"><input type="hidden" name="input_id" value="1"><input type="hidden" name="num_source_files" id="num-source-filesio_timer_3" value="1"><input type="hidden" name="agent" value="website"></form></div></div></div></td></tr></tbody></table><!-- Problem Statement --><div id="dsb-problem-content-div1" class="dsb-problem-content-div" style="width: 40em;"><p class="problem-item">Problem</p>
<p>
You own a milkshake shop.  There are N different flavors that you can prepare, and each flavor can be prepared "malted" or "unmalted".  So, you can make 2N different types of milkshakes.
</p><p>

Each of your customers has a set of milkshake types that they like, and they will be satisfied if you have at least one of those types prepared.  At most one of the types a customer likes will be a "malted" flavor.
</p><p>

You want to make N batches of milkshakes, so that:
</p><ul>
<li>There is exactly one batch for each flavor of milkshake, and it is either malted or unmalted.
</li><li>For each customer, you make at least one milkshake type that they like.
</li><li>The minimum possible number of batches are malted.
</li></ul>
Find whether it is possible to satisfy all your customers given these constraints, and if it is, what milkshake types you should make.
<p>
If it is possible to satisfy all your customers, there will be only one answer which minimizes the number of malted batches.
</p><p>
</p><p class="problem-item">Input</p>

<ul>
<li>One line containing an integer <b>C</b>, the number of test cases in the input file.
</li></ul>
For each test case, there will be:
<ul>
<li>One line containing the integer <b>N</b>, the number of milkshake flavors.
</li><li>One line containing the integer <b>M</b>, the number of customers.
</li><li><b>M</b> lines, one for each customer, each containing:
<ul>
<li>An integer <b>T</b> &gt;= 1, the number of milkshake types the customer likes, followed by
</li><li><b>T</b> pairs of integers "<b>X Y</b>", one for each type the customer likes, where <b>X</b> is the milkshake flavor between <b>1</b> and <b>N</b> inclusive, and <b>Y</b> is either 0 to indicate unmalted, or 1 to indicated malted.  Note that:
<ul>
<li>No pair will occur more than once for a single customer.
</li><li>Each customer will have at least one flavor that they like (T &gt;= 1).
</li><li>Each customer will like at most one malted flavor.  (At most one pair for each customer has Y = 1).
</li></ul>
</li></ul>
All of these numbers are separated by single spaces.
</li></ul>

<p class="problem-item">Output</p>
<p>
</p><ul>
<li><b>C</b> lines, one for each test case in the order they occur in the input file, each containing the string "Case #<b>X</b>: " where <b>X</b> is the number of the test case, starting from 1, followed by:
<ul>
<li>The string "<b>IMPOSSIBLE</b>", if the customers' preferences cannot be satisfied; <b>OR</b>
</li><li><b>N</b> space-separated integers, one for each flavor from <b>1</b> to <b>N</b>, which are 0 if the corresponding flavor should be prepared unmalted, and 1 if it should be malted.
</li></ul>
</li></ul>
<p>
</p><p class="problem-item">Limits</p>
<p class="problem-item">Small dataset</p>
<p>
C = 100
<br>
1 &lt;= N &lt;= 10
<br>
1 &lt;= M &lt;= 100
</p><p class="problem-item">Large dataset</p>
<p>
C = 5
<br>
1 &lt;= N &lt;= 2000
<br>
1 &lt;= M &lt;= 2000
</p><p>
The sum of all the <b>T</b> values for the customers in a test case will not exceed 3000.

</p><p class="problem-item">Sample</p>
<div class="problem-io-wrapper">
<table>
<tbody><tr>
<td>
<br>
<span class="problem-item-gray">Input</span>
<br>&nbsp;
</td>
<td>
<br>
<span class="problem-item-gray">Output</span>
<br>&nbsp;
</td>
</tr>
<tr>
<td>
<code>
2<br>
5<br>
3<br>
1 1 1<br>
2 1 0 2 0<br>
1 5 0<br>
1<br>
2<br>
1 1 0<br>
1 1 1<br>
</code>
</td>
<td>
<code>
Case #1: 1 0 0 0 0<br>
Case #2: IMPOSSIBLE<br>
<br>
</code>
</td></tr></tbody></table>
</div>

<p>
In the first case, you must make flavor #1 malted, to satisfy the first customer.  Every other flavor can be unmalted.  The second customer is satisfied by getting flavor #2 unmalted, and the third customer is satisfied by getting flavor #5 unmalted.
</p><p>
In the second case, there is only one flavor.  One of your customers wants it malted and one wants it unmalted.  You cannot satisfy them both.</p></div></div><div id="dsb-problem-page2" class="dsb-content-pages" style="display: none;"><!-- Problem Input File Selection --><div class="dsb-input-panel-text" id="dsb-input-panel-text2"><span style="color: #666666;">This contest is open for practice.  You can try every problem as many times as you like, though we won't keep track of which problems you solve.  Read the <a href="https://code.google.com/codejam/quickstart.html" target="_blank">Quick-Start Guide</a> to get started.</span></div><table><tbody id="dsb-input-form-table2"><tr><td class="dsb-input-table-description">Small input<br>15 points</td><td class="dsb-input-table-linktd"><div id="dsb-action-box-wrap2-0" class="dsb-action-box-open"><div id="dsb-input-wrapper2-0" class="dsb-input-wrapper" style="display: inline;"><button class="dsb-input-start-button" id="dsb-input-start-button2-0" style="display: none;">Solve C-small</button><span class="dsb-input-link-span" id="dsb-input-link-plain2-0" style="display: inline;"><img class="dsb-input-link-img" src="./Problem B_files/file.gif"><span class="dsb-input-link-text" id="dsb-input-link-plain-text2-0">Download C-small-practice.in</span></span></div><span class="dsb-input-table-caption" id="dsb-input-table-caption2-0" style="display: none;"></span><span class="dsb-input-table-caption" id="dsb-resubmit-caption2-0" style="display: none;">Your submission was received. You can still <span class="dsb-input-link-text" id="dsb-resubmit-link2-0">resubmit</span> for <span id="dsb-resubmit-timer2-0"></span>.<br>Only your last submission counts. <span class="dsb-input-link-text" id="dsb-resubmit-view-sub-link2-0">View your last submission</span>.</span><div><div class="dsb-submit-form-div" id="dsb-submit-form-div2-0" style="display: block;"><div style="display:none"><b>Time Remaining:</b> <span id="io_timer_4"></span>&nbsp;&nbsp;</div><div style="display:none"><b>Input:</b> C-small-practice.in.</div><form id="submit-formio_timer_4" action="https://code.google.com/codejam/contest/32016/dashboard/do" enctype="multipart/form-data" method="post"><input type="hidden" name="csrfmiddlewaretoken" value="NjkyZTFiODA0NDQ1ZDgxYzVjMzE2YjUyMzQ0OGI4Yjh8fDE0OTI1ODQxMjA3MTY5OTA="><div class="dsb-submit-form-separator">your output file:<input id="output-fileio_timer_4" type="file" name="answer" class="submitFormFile"></div><div style="display: none"><table class="dsb-source-code-table"><tbody><tr><td style="padding:0.4em 0.2em 0 0">source code:&nbsp;&nbsp;</td><td><div id="source-filesio_timer_4"><div id="input-file-divio_timer_4-0"><span id="source-fileio_timer_4-0"><input type="file" name="source-file0" class="submitFormFile"></span><span id="remove-source-fileio_timer_4-0" class="dsb-submit-form-links" style="visibility: hidden;">remove</span></div></div><span id="add-source-fileio_timer_4" class="dsb-submit-form-links">Add another file</span></td></tr></tbody></table></div><div class="dsb-submit-form-separator" style="color:gray">source file(s): &nbsp;&nbsp;&nbsp;not needed for the practice contest</div><div class="dsb-submit-form-separator" style="text-align:center"><input id="submit-buttonio_timer_4" type="button" value="Submit file">&nbsp;&nbsp;<input id="dsb-hide-submissionio_timer_4" type="button" value="Hide"></div><div id="source-file-namesio_timer_4"></div><input type="hidden" name="cmd" value="SubmitAnswer"><input type="hidden" name="problem" value="24483"><input type="hidden" name="input_id" value="0"><input type="hidden" name="num_source_files" id="num-source-filesio_timer_4" value="1"><input type="hidden" name="agent" value="website"></form></div></div></div></td></tr><tr><td class="dsb-input-table-description">Large input<br>35 points</td><td class="dsb-input-table-linktd"><div id="dsb-action-box-wrap2-1" class="dsb-action-box-open"><div id="dsb-input-wrapper2-1" class="dsb-input-wrapper" style="display: inline;"><button class="dsb-input-start-button" id="dsb-input-start-button2-1" style="display: none;">Solve C-large</button><span class="dsb-input-link-span" id="dsb-input-link-plain2-1" style="display: inline;"><img class="dsb-input-link-img" src="./Problem B_files/file.gif"><span class="dsb-input-link-text" id="dsb-input-link-plain-text2-1">Download C-large-practice.in</span></span></div><span class="dsb-input-table-caption" id="dsb-input-table-caption2-1" style="display: none;"></span><span class="dsb-input-table-caption" id="dsb-resubmit-caption2-1" style="display: none;">Your submission was received. You can still <span class="dsb-input-link-text" id="dsb-resubmit-link2-1">resubmit</span> for <span id="dsb-resubmit-timer2-1"></span>.<br>Only your last submission counts. <span class="dsb-input-link-text" id="dsb-resubmit-view-sub-link2-1">View your last submission</span>.</span><div><div class="dsb-submit-form-div" id="dsb-submit-form-div2-1" style="display: block;"><div style="display:none"><b>Time Remaining:</b> <span id="io_timer_5"></span>&nbsp;&nbsp;</div><div style="display:none">You may resubmit this multiple times within the remaining time-frame. Only your last submission will count.</div><form id="submit-formio_timer_5" action="https://code.google.com/codejam/contest/32016/dashboard/do" enctype="multipart/form-data" method="post"><input type="hidden" name="csrfmiddlewaretoken" value="NjkyZTFiODA0NDQ1ZDgxYzVjMzE2YjUyMzQ0OGI4Yjh8fDE0OTI1ODQxMjA3MTY5OTA="><div class="dsb-submit-form-separator">your output file:<input id="output-fileio_timer_5" type="file" name="answer" class="submitFormFile"></div><div style="display: none"><table class="dsb-source-code-table"><tbody><tr><td style="padding:0.4em 0.2em 0 0">source code:&nbsp;&nbsp;</td><td><div id="source-filesio_timer_5"><div id="input-file-divio_timer_5-0"><span id="source-fileio_timer_5-0"><input type="file" name="source-file0" class="submitFormFile"></span><span id="remove-source-fileio_timer_5-0" class="dsb-submit-form-links" style="visibility: hidden;">remove</span></div></div><span id="add-source-fileio_timer_5" class="dsb-submit-form-links">Add another file</span></td></tr></tbody></table></div><div class="dsb-submit-form-separator" style="color:gray">source file(s): &nbsp;&nbsp;&nbsp;not needed for the practice contest</div><div class="dsb-submit-form-separator" style="text-align:center"><input id="submit-buttonio_timer_5" type="button" value="Submit file">&nbsp;&nbsp;<input id="dsb-hide-submissionio_timer_5" type="button" value="Hide"></div><div id="source-file-namesio_timer_5"></div><input type="hidden" name="cmd" value="SubmitAnswer"><input type="hidden" name="problem" value="24483"><input type="hidden" name="input_id" value="1"><input type="hidden" name="num_source_files" id="num-source-filesio_timer_5" value="1"><input type="hidden" name="agent" value="website"></form></div></div></div></td></tr></tbody></table><!-- Problem Statement --><div id="dsb-problem-content-div2" class="dsb-problem-content-div" style="width: 40em;"><p class="problem-item">Problem</p>

<p>
In this problem, you have to find the last three digits before the decimal point for the number (3 + √5)<sup><b>n</b></sup>.
</p>
<p>
For example, when <b>n</b> = 5, (3 + √5)<sup>5</sup> = 3935.73982... The answer is 935.
</p>

<p>
For <b>n</b> = 2, (3 + √5)<sup>2</sup> = 27.4164079... The answer is 027.
</p>

<p class="problem-item">Input</p>
<p>
The first line of input gives the number of cases, <b>T</b>.
<b>T</b> test cases follow, each on a separate line. Each test case contains one positive integer <b>n</b>.
</p>

<p class="problem-item">Output</p>
<p>
For each input case, you should output:
</p><pre>Case #<b>X</b>: <b>Y</b></pre>
where <b>X</b> is the number of the test case and <b>Y</b> is the last three integer digits of the number (3 + √5)<sup><b>n</b></sup>. In case that number has fewer than three integer digits, add leading zeros so that your output contains exactly three digits.
<p></p>

<p class="problem-item">Limits</p>
<p>
1 &lt;= <b>T</b> &lt;= 100
</p>

<p class="problem-item">Small dataset</p>
<p>
2 &lt;= <b>n</b> &lt;= 30
</p>

<p class="problem-item">Large dataset</p>
<p>
2 &lt;= <b>n</b> &lt;= 2000000000<br>
</p>

<p class="problem-item">Sample</p>
<div class="problem-io-wrapper">
<table>
<tbody><tr>
<td>
<br>
<span class="problem-item-gray">Input</span>
<br>&nbsp;
</td>
<td>
<br>
<span class="problem-item-gray">Output</span>
<br>&nbsp;
</td>
</tr>
<tr>
<td>
<code>
2<br>
5<br>
2<br>
</code>
</td>
<td>
<code>
Case #1: 935<br>
Case #2: 027<br>
<br>
</code>
</td></tr></tbody></table>
</div></div></div></div>

    <div id="dsb-analysis-page" class="dsb-content-pages" style="display: block;"><div id="dsb-analysis-selections"><span id="dsb-analysis-selection-p3" class="dsb-analysis-not-selected">Overview</span>&nbsp; | &nbsp;<span id="dsb-analysis-selection-p0" class="dsb-analysis-not-selected">Problem A</span>&nbsp; | &nbsp;<span id="dsb-analysis-selection-p1" class="dsb-analysis-selected">Problem B</span>&nbsp; | &nbsp;<span id="dsb-analysis-selection-p2" class="dsb-analysis-not-selected">Problem C</span></div><div id="dsb-problem-analysis-div3" class="dsb-problem-content-div" style="display: none;"><p>
The first sub-round of Google Code Jam 2008 Round 1 featured three little challenges. Each problem required one or two cute ideas to solve.
</p>
<p>
The first problem is formulated in one of the important concepts connecting algebra and geometry, that of scalar product, also known as inner product. Though the problem itself is an exercise in arrays and numbers.</p>
<p>The second problem, as mundane as the name suggests, has some connection to the propositional logic, especially the satisfiability problem. Unlike the super-hard general satisfiability problem, this one is in a restricted form, and thus allows one to find a simple and cute solution.</p>
<p>
The third problem, appears as a numerical problem, actually should be solved with only integer numbers. With ideas from elementary algebra, combinatorics, and number theory, armed with some standard tricks on the computational side, we know at least four different solutions with distinct flavor. 
</p>
<p>
2394 contestants finished the match with a positive score, among them, we have 41 perfect scores.
</p>

<br>
<hr>
<p class="problem-item">Credits</p>
<p>Problem A. <i>Minimum Scalar Product</i> Written by Michael Levin. Prepared by Frank Chu.</p>
<p>Problem B. <i>Milkshakes</i> Written by John Dethridge. Prepared by Frank Chu and John Dethridge.</p>
<p>Problem C. <i>Numbers</i> Written and prepared by Cosmin Negruseri.</p>
<p>Contest analysis presented by Cosmin Negruseri, Xiaomin Chen, and John Dethridge.</p>
</div><div id="dsb-problem-analysis-div0" class="dsb-problem-content-div" style="display: none;"><p>In spite of the geometric flavor in the name of this problem, it is truly a story of two arrays.</p>
<p>There are two permutations involved. However, after you fix the permutation for V<sub>1</sub>, you have complete freedom in choosing the permutation for V<sub>2</sub>. It is clear that the first permutation really does not matter. The important thing is which x<sub>i</sub> gets to be matched to which y<sub>j</sub>.</p>
<p>
To make thinking easier, we may assume that the first permutation has<br>
</p><pre>x<sub>1</sub> ≤ x<sub>2</sub> ≤ ... ≤ x<sub>n</sub>. (1)
</pre>
And our task is to match the y's to the x's so that the scalar product is as small as possible.
<p></p>
<p>At this point, if you need a little exercise in the middle: Think about the case <nobr>n = 2</nobr>, and just use a concrete example. What you will surely discover is that, in order to achieve the minimum scalar product, you always want to match the smaller x<sub>i</sub> with the bigger y<sub>j</sub>.</p>
<p>What we would like to prove is: under condition (1), one of the optimal solutions is of the form<br>
</p><pre>y<sub>1</sub> ≥ y<sub>2</sub> ≥ ... ≥ y<sub>n</sub>. (2)
</pre>
<p></p>
The rigorous proof of (2) is given at the end of this analysis. For an easy reading, we point out that the key step is really the <nobr>n = 2</nobr> case. If x &lt; x' and y &lt; y', then<br>
<pre>(xy + x'y') - (xy' + x'y) = (x - x')(y - y') &gt; 0. (*)
</pre>
So we prefer to match bigger y's with smaller x's.
<p></p>
<p>
Therefore, this problem is solved by the following simple algorithm.<br>
</p><pre>sort(v1.begin(), v1.end());
sort(v2.begin(), v2.end(), greater&lt;int&gt;());
long long ret = 0;
for (int i = 0; i &lt; n; i++)
  ret += (long long)(v1[i]) * v2[i];
</pre>
<p></p>
<p>
<i>Proof of (2).</i> We prove that any permutation that does not satisfy (2) can be transformed into one satisfying (2), and in each step we do not increase the scalar product.<br>
Indeed, any unsorted array can be transformed to a sorted one by only interchanging adjacent elements that are out of order. (For more rigorous readers: prove this, maybe by counting the number of flipped pairs in the array.)<br>
At each step, some <nobr>x = x<sub>i</sub></nobr> is matched to some <nobr>y, and x' = x<sub>i+1</sub></nobr> is matched to some y' so that <nobr>y ≤ y'</nobr>. We interchange y and y' in this step. The inequality similar to (*), with &gt; replaced by ≥, tells us that the scalar product is not increased in this step. ◊
</p>

<p class="problem-item">
More information:
</p>
<p>
<a href="http://www.google.com/search?q=scalar+product" target="_blank">The Scalar product</a>
</p>
</div><div id="dsb-problem-analysis-div1" class="dsb-problem-content-div" style="display: block;">On the surface, this problem appears to require solving the classic problem "Satisfiability," the canonical example of an NP-complete problem.  The customers represent clauses, the milkshake flavors represent variables, and malted and unmalted flavors represent whether the variable is negated.
<p>
We are not evil enough to have chosen a problem that hard!  The restriction that makes this problem easier is that the customers can only like at most one malted flavor (or equivalently, the clauses can only have at most one negated variable.)
</p><p>
Using the following steps, we can quickly find whether a solution exists, and if so, what the solution is.
</p><p>
</p><ol>
<li> Start with every flavor unmalted and consider the customers one by one.
</li><li> If there is an unsatisfied customer who only likes unmalted flavors, and all those flavors have been made malted, then no solution is possible.
</li><li> If there is an unsatisfied customer who has one favorite malted flavor, then we must make that flavor malted.  We do this, then go back to step 2.
</li><li> If there are no unsatisfied customers, then we already have a valid solution and can leave the remaining flavors unmalted.
</li></ol>
<p>
Notice that whenever we made a flavor malted, we were forced to do so. Therefore, the solution we got must have the minimum possible number of malted flavors.
</p><p>
With clever data structures, the above algorithm can be implemented to run in linear time.
</p>
<p class="problem-item">
More information:
</p>
<p>
<a href="http://www.google.com/search?q=Satisfiability+problem" target="_blank">The Satisfiability problem</a> - 
<a href="http://www.google.com/search?q=Horn+clauses" target="_blank">Horn clauses</a>
</p>
</div><div id="dsb-problem-analysis-div2" class="dsb-problem-content-div" style="display: none;"><p>
This problem with a simple statement was in fact one of the hardest in Round 1. The input restrictions for the small input were chosen so that straightforward solutions in Java or Python, which have arbitrary-precision numbers, would fail. The trick was calculating √5 to a large enough precision and not using the default double value. It turned out that using the Windows calculator or the UNIX <code>bc</code> tool was enough to solve the small tests as well.
</p>
<p>
Solving the large tests was a very different problem. The difficulty comes from the fact that √5 is irrational and for n close to 2000000000 you would need a lot of precision and a lot of time if you wanted to use the naive solution.
</p>
<p>
The key in solving the problem is a mathematical concept called <a href="http://en.wikipedia.org/wiki/Conjugate_%28algebra%29" target="_blank">conjugation</a>. In our problem, we simply note that <nobr>(3 - √5)</nobr> is a nice conjugate for <nobr>(3 + √5)</nobr>. Let us define<br>
</p><blockquote>
(1) &nbsp;&nbsp;&nbsp; α := 3 + √5,  &nbsp; β := 3 - √5, &nbsp; and 
X<sub>n</sub> := α<sup>n</sup> + β<sup>n</sup>.
</blockquote>
We first note that X<sub>n</sub> is an integer. This can be proved by using the <a href="http://en.wikipedia.org/wiki/Binomial_theorem" target="_blank">binomial expansion</a>. If you write everything down you'll notice that the irrational terms of the sums cancel each other out.<br>
<blockquote>
(2) &nbsp;&nbsp;&nbsp; <img src="./Problem B_files/saved_resource">
</blockquote>

Another observation is that β<sup>n</sup> &lt; 1, so X<sub>n</sub> is actually the first integer greater than α<sup>n</sup>. Thus we may just focus on computing the last three digits of X<sub></sub>.
<p></p>

<p>
<i>A side note.</i> In fact, β<sup>n</sup> tends to 0 so quickly that that our problem would be trivial if we asked for the three digits <i>after</i> the decimal point. For all large values of n they are always 999.
</p>
<p>
Based on (1) and (2), there are many different solutions for finding the last three digits of X<sub>n</sub>.
</p>

<p class="problem-item">Solution A. [the interleave of rational and irrational]</p>
<p>
One solution goes like this: α<sup>n</sup> can be written as <nobr>(a<sub>n</sub> + b<sub>n</sub>√5)</nobr>, where a<sub>n</sub> and b<sub>n</sub> are integers. At the same time, β<sup>n</sup> is exactly <nobr>(a<sub>n</sub> - b<sub>n</sub>√5)</nobr> and <nobr>X<sub>n</sub> = 2a<sub>n</sub></nobr>. Observe that<br>
</p><blockquote>
(3) &nbsp;&nbsp;&nbsp; α<sup>(n + 1)</sup> = (3 + √5)(a<sub>n</sub> + b<sub>n</sub>√5) = (3a<sub>n</sub> + 5b<sub>n</sub>) + (3b<sub>n</sub> + a<sub>n</sub>)√5.
</blockquote> 
So a<sub>n + 1</sub> = 3a<sub>n</sub> + 5b<sub>n</sub> and b<sub>n + 1</sub> = 3b<sub>n</sub> + a<sub>n</sub>. This can be written in matrix form as
<blockquote>
(4) &nbsp;&nbsp;&nbsp; <img src="./Problem B_files/saved_resource(1)">
</blockquote>
Since α<sup>0</sup> = 1, we have (a<sub>0</sub>, b<sub>0</sub>) = (1, 0).
<p></p>
<p>
Now we use the standard <a href="http://en.wikipedia.org/wiki/Exponentiation_by_squaring" target="_blank">
fast exponentiation
</a> to get A<sup>n</sup> in O(log n) time. Note that we do all operations modulo 1000 because we just need to return the last three digits of a<sub>n</sub>.

</p>
<p>
Here's some Python code that implements this solution:
</p><pre>def matrix_mult(A, B):
  C = [[0, 0], [0, 0]]
  for i in range(2):
    for j in range(2):
      for k in range(2):
        C[i][k] = (C[i][k] + A[i][j] * B[j][k]) % 1000
  return C

def fast_exponentiation(A, n):
  if n == 1:
    return A
  else:
    if n % 2 == 0:
      A1 = fast_exponentiation(A, n/2)
      return matrix_mult(A1, A1)
    else:
      return matrix_mult(A, fast_exponentiation(A, n - 1))

def solve(n):
  A = [[3, 5], [1, 3]]
  A_n = fast_exponentiation(A, n)
  return (2 * M_n[0][0] + 999) % 1000
</pre>
<p></p>

<p class="problem-item">Solution B. [the quadratic equation and linear recurrence]</p>
<p>
Experienced contestants may notice there is a linear recurrence on the X<sub>i</sub>'s. Indeed, this is not hard to find -- the conjugation enters the picture again.
</p>
<p>Notice that
</p><blockquote>
(5) &nbsp;&nbsp;&nbsp; α + β = 6, and α β = 4.
</blockquote>
So α and β are the two roots of the quadratic equation x<sup>2</sup> - 6x + 4 = 0. i.e.,
<blockquote>
(6) &nbsp;&nbsp;&nbsp; α<sup>2</sup> = 6α - 4,  and β<sup>2</sup> = 6β - 4.
</blockquote>
Looking at (1) and (6) together, we happily get
<blockquote>
(7) &nbsp;&nbsp;&nbsp; X<sub>n+2</sub> = 6X<sub>n+1</sub> - 4X<sub>n</sub>.
</blockquote>
Such recurrence can always be written in matrix form. It is somewhat redundant, but it is useful:
<blockquote>
<img src="./Problem B_files/saved_resource(2)">
</blockquote>
From here it is another fast matrix exponentiation. Let us see <b>radeye</b>'s perl code that implements this approach here:
<pre>sub mul {
    my $a = shift ;
    my $b = shift ;
    my @a = @{$a} ;
    my @b = @{$b} ;
    my @c = ($a[0]*$b[0] + $a[1]*$b[2],
             $a[0]*$b[1] + $a[1]*$b[3],
             $a[2]*$b[0] + $a[3]*$b[2],
             $a[2]*$b[1] + $a[3]*$b[3]) ;
    @c = map { $_ % 1000 } @c ;
    return @c ;
}
sub f {
    my $n = shift ;
    return 2 if $n == 0 ;
    return 6 if $n == 1 ;
    return 28 if $n == 2 ;
    $n -= 2 ;
    my @mat = (0, 1, 996, 6) ;
    my @smat = @mat ;
    while ($n &gt; 0) {
        if ($n &amp; 1) {
            @mat = mul([@mat], [@smat]) ;
        }
        @smat = mul([@smat], [@smat]) ;
        $n &gt;&gt;= 1 ;
    }
    return ($mat[0] * 6 + $mat[1] * 28) % 1000 ;
}
sub ff {
   my $r = shift ;
   $r = ($r + 999) % 1000 ;
   $r = "0" . $r while length($r) &lt; 3 ;
   return $r ;
}
for $c (1..&lt;&gt;) {
    $n = &lt;&gt; ;
    print "Case #$c: ", ff(f($n)), "\n" ;
}
</pre>
<p></p>

<p class="problem-item">Solution C. [the periodicity of 3 digits]</p>
<p>For this problem, we have another approach based on the recurrence (7). Notice that we only need to focus on the last 3 digits of X<sub>n</sub>, which only depends on the last 3 digits of the previous two terms. The numbers eventually become periodic as soon as we have (X<sub>i</sub>, X<sub>i+1</sub>) and (X<sub>j</sub>, X<sub>j+1</sub>) with the same last 3 digits, where i &lt; j. It is clear that we will enter a cycle no later than 10<sup>6</sup> steps. In fact, for this problem, you can write some code and find out that the cycle has the size 100 and starts at the 3rd element in the sequence. So to solve the problem we can just brute force the results for the first 103 numbers and if n is bigger than 103 return the result computed for the number (n - 3) % 100 + 3.
</p>

<p class="problem-item">Solution D. [the pure quest of numbers and combinatorics]</p>
<p>
Let us see one more solution of different flavor. Here is a solution not as general as the others, but tailored to this problem,  and makes one feel we are almost solving this problem by hand.</p>
Let us look again at (2). We want to know X<sub>n</sub> mod 1000. We know from the <a href="http://en.wikipedia.org/wiki/Chinese_remainder_theorem" target="_blank">chinese remander theorem</a> that if we can find X<sub>n</sub> mod 8 and X<sub>n</sub> mod 125, then X<sub>n</sub> mod 1000 is uniquely determined.<br>
<b>(a)</b> For n &gt; 2, X<sub>n</sub> mod 8 is always 0. Since 5<sup>i</sup> ≡ 1 (mod 4), 3<sup>n-2i</sup> ≡ 1 or -1 (mod 4) depending on n, so, for n &gt; 2, 
<blockquote>
<img src="./Problem B_files/saved_resource(3)">
</blockquote>
<b>(b)</b> To compute X<sub>n</sub> mod 125, we only need to worry about i=0,1,2. All the rest are 0 mod 125. In other words, all we need to compute is
<blockquote>
<img src="./Problem B_files/saved_resource(4)">
</blockquote> 
There are various ways to compute the elements in the above quantity. The exponents can be computed by fast exponentiation, or using the fact that 3<sup>n</sup> mod 125 is periodic with cycle length at most 124. The binomial numbers can be computed using arbitrary precision integers in languages like Java and Python, or with a bit careful programming in languages like C++.
<p></p>

<p class="problem-item">
More information:
</p>
<p>
<a href="http://www.google.com/search?q=binomial+numbers" target="_blank">Binomial numbers</a> - 
<a href="http://www.google.com/search?q=linear+recurrence" target="_blank">Linear recurrence</a> - 
<a href="http://www.google.com/search?q=exponentiation" target="_blank">Exponentiation</a> - 
<a href="http://www.google.com/search?q=chinese+remainder+theorem" target="_blank">Chinese remainder theorem</a>
</p>
</div></div>

    <div id="dsb-clarification-page" class="dsb-content-pages" style="display: none;">
      <!-- The clarifications table -->
      <div id="clarTableDiv" class="clarTableWrapper"></div><div>
        <table id="dsb-clarification-table" style="display: block;">
          <colgroup span="9">
            <col width="16%"><col width="2%">
            <col width="10%"><col width="2%">
            <col width="28%"><col width="2%">
            <col width="10%"><col width="2%">
            <col width="28%">
          </colgroup>
          <thead>
            <tr>
            <th>Category</th><th>&nbsp;</th>
            <th class="clarTimeColumn">Asked</th><th>&nbsp;</th>
            <th>Question</th><th>&nbsp;</th>
            <th class="clarTimeColumn">Answered</th><th>&nbsp;</th>
            <th>Answer</th>
            </tr>
          </thead>
          <tbody id="dsb-clarification-tbody"><tr class="dsb-clar-tr dsb-clar-tr-announcement"><td class="clarProbTd">[Unknown]<br><span style="color: #666">Announcement</span></td><td></td><td class="clarTimeColumn">41:39</td><td></td><td><i>Is it possible that a customer likes both the malted and unmalted type of the same flavor ?</i></td><td></td><td class="clarTimeColumn" style="color: red;">43:26</td><td></td><td><i>Yes.</i></td></tr><tr class="dsb-clar-tr dsb-clar-tr-announcement"><td class="clarProbTd">[Unknown]<br><span style="color: #666">Announcement</span></td><td></td><td class="clarTimeColumn">32:17</td><td></td><td><i>If two customers want the same type of milkshake, can we satisfy both with one batch?</i></td><td></td><td class="clarTimeColumn" style="color: red;">35:29</td><td></td><td><i>A batch will satisfy all users who want that type (flavor and maltedness) of milkshake.</i></td></tr><tr class="dsb-clar-tr dsb-clar-tr-announcement"><td class="clarProbTd">[Unknown]<br><span style="color: #666">Announcement</span></td><td></td><td class="clarTimeColumn">6:20</td><td></td><td><i>What does 'smallest' mean?  Is -10 smaller than 1?</i></td><td></td><td class="clarTimeColumn" style="color: red;">7:01</td><td></td><td><i>-10 is smaller than 1.</i></td></tr></tbody>
        </table>
      </div>
      <div id="dsb-submit-clarification" style="display: none;">
        <!-- The link to ask a clarification -->
        <div style="padding: 0.5em 0 0.3em 0;">
          <b>Ask a question:</b>
        </div>
        <!-- The form for asking clarification -->
        <div>
          <form onsubmit="return GCJ.submitClarification(this);"><div style="display:none;"><input type="hidden" name="csrfmiddlewaretoken" value="NmNjZmIxODk5ZDkxMjI2ZDkyMjZmMDkyODQ3OTdmNDV8fDE0OTI1ODQxMjAyODM3NjA="></div>
            <div><textarea rows="5" cols="60" name="q"></textarea></div>
            <div style="padding-top: 0.3em">
              <select id="dsb-clarification-problem-select" name="problem">
                <option value="_" selected="">[General]</option>
              <option value="24484">A. Minimum Scalar Product</option><option value="24482">B. Milkshakes</option><option value="24483">C. Numbers</option></select>
              &nbsp;
              <input id="dsb-submit-clarification-button" type="submit" value="Ask">
            </div>
          </form>
        </div>
      </div>
      <!-- Too many pending clarifications -->
      <div id="dsb-cannot-ask-question-text" style="font-weight: bold; padding: 0.5em 0px 0.3em; display: block;">You cannot ask questions at this time. Please email us at codejam@google.com.</div>

    </div>

    <div id="dsb-submissions-page" class="dsb-content-pages">
      <div id="dsb-submissions-status" class="dsb-sub-status-msg">
        You have 0 submissions.
      </div>
      <table id="dsb-submissions-table" class="dsb-sub-main-table" style="display:none">
      <thead>
        <tr id="dsb-sub-main-table-header">
          <th class="dsb-sub-row-id-width">ID</th>
          <th class="dsb-sub-name-width">Problem</th>
          <th class="dsb-sub-difficulty-width">Size</th>
          <th class="dsb-sub-input-width">Input</th>
          <th class="dsb-sub-output-width">Output</th>
          <th class="dsb-sub-source-width">Solution</th>
          <th class="dsb-sub-status-width">Status</th>
          <th class="dsb-sub-time-width">Time</th>
        </tr>
      </thead>
      <tbody id="dsb-submissions-rows">
      </tbody>
      </table>
    </div>

  </div>
  </div>
</div>

</div>

<div style="height: 3em; clear: both;"></div>




<div id="footer">
  
  
  <p>
    All problem statements, input data and contest analyses are
    licensed under the
    <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution License</a>.
    
  </p>
  
  <span id="copyright">© 2008-2017 Google</span>
  <a href="http://www.google.com/">Google Home</a> -
  <a href="https://code.google.com/codejam/terms.html">Terms and Conditions</a> -
  <a href="http://www.google.com/intl/en/policies">Privacy Policies and Principles</a>
  <br><br>
  <a href="http://cloud.google.com/"><img width="125" height="91" src="./Problem B_files/powered_by_gcp_logo.png"></a>
  
</div>


<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-21302427-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script');
    ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
  })();
</script>



<div style="height: 1em">&nbsp;</div>

<script type="text/javascript">
GCJ.initHistory();
</script><input type="text" name="history_state0" id="history_state0" style="display:none">




</div></body></html>